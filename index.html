<html>
<head>
	<script src="html2canvas.js"></script>
	<script src="jquery-3.5.1.min.js"></script>
	<script>
		(function(d) {
			var config = {
				kitId: 'ekk7lhn',
				scriptTimeout: 3000,
				async: true
			},
			h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
		})(document);
		(function(d) {
			var config = {
				kitId: 'ekk7lhn',
				scriptTimeout: 3000,
				async: true
			},
			h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
		})(document);
		(function(d) {
			var config = {
				kitId: 'ekk7lhn',
				scriptTimeout: 3000,
				async: true
			},
			h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
		})(document);
	</script>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="text" id="word4">
		<p class="simp simp-margin-4 text-size-4">
			胡编乱造
		</p>
		<p class="comp comp-margin-4 text-size-4">
			<strong>胡編亂造</strong>
		</p>
		<div class="width4">
			<p class="pinyin">
				<strong>hú biān luàn zào</strong>
			</p>
		</div>
		<div class="trans trans-margin-4">
			<em>to concoct a cock-and-bull story</em>
		</div>
	</div>
	<div class="text" id="word-single-4">
		<p class="simp simp-single-margin-4 text-size-single-4">
			共产主义
		</p>
		<div class="width4">
			<p class="pinyin">
				<strong>gòng chǎn zhǔ yì</strong>
			</p>
		</div>
		<div class="trans trans-single-margin-4">
			<em>communism</em>
		</div>
	</div>
	<div class="text" id="word3">
		<p class="simp simp-margin-3 text-size-3">
			共产主
		</p>
		<p class="comp comp-margin-3 text-size-3">
			<strong>共產主</strong>
		</p>
		<div class="width3">
			<p class="pinyin">
				<strong>gòng chǎn zhǔ</strong>
			</p>
		</div>
		<div class="trans trans-margin-3">
			<em>communism</em>
		</div>
	</div>
	<div class="text" id="word-single-3">
		<p class="simp simp-single-margin-3 text-size-single-3">
			共产主
		</p>
		<div class="width-single-3">
			<p class="pinyin">
				<strong>gòng chǎn zhǔ</strong>
			</p>
		</div>
		<div class="trans trans-single-margin-3">
			<em>communism</em>
		</div>
	</div>
	<div class="text" id="word2">
		<p class="simp simp-margin-2 text-size-2">
			诽谤
		</p>
		<p class="comp comp-margin-2 text-size-2">
			<strong>誹謗</strong>
		</p>
		<div class="width2">
			<p class="pinyin">
				<strong>fěi bàng</strong>
			</p>
		</div>
		<div class="trans trans-margin-2">
			<em>slander</em>
		</div>
	</div>
	<div class="text" id="word-single-2">
		<p class="simp simp-margin-single-2 text-size-single-2">
			作者
		</p>
		<div class="width-single-2">
			<p class="pinyin">
				<strong>zuò zhě</strong>
			</p>
		</div>
		<div class="trans trans-margin-single-2">
			<em>writer</em>
		</div>
	</div>

	<div class="buttons">
		<!-- <div id="like_button_container"></div> -->
	</div>



	<div id="hidden">
		ā á ǎ à ō ó ǒ ò ē é ě è ī í ǐ ì ū ú ǔ ù ǖ ǘ ǚ  ǜ  ü
	</div>
	<script>
		window.addEventListener("load", function(){
			elements = document.querySelectorAll(".text")
			appendFunction = function(element) {
				html2canvas(element).then(canvas => {
					document.body.appendChild(canvas);
				})
			}
			elements.forEach(appendFunction);
			// logFunction = function(element) {
			// 	console.log(element)
			// }

			trimFunction = function(words) {
				words =words.normalize("NFD").replace(/[\u0300-\u036f]/g, "")
				words = words.split(/\r?\n/);
				words = words.map(s => s = s.trim());
				words = words.map(s => s = s.replace(/ /g, "_"));
				words = words.filter(Boolean);
				return words;
			}
			chinese_words = $('.text:visible').children("p.simp").text().toString();
			chinese_words = trimFunction(chinese_words);
			pinyin_words = $('.text:visible').find("p.pinyin").text().toString();
			pinyin_words = trimFunction(pinyin_words);
			console.log(pinyin_words);

			createButton = function(name) {
				var r=$('<input/>').attr({
					type: "button",
					id: "field",
					value: name
				});
				$(".buttons").append(r);    
			}
			chinese_words.forEach(createButton);
			// console.log(names);

			// names = $('.text:visible').children("p.simp").each((i, ele) => {
			// 	console.log(ele);
			// 	// console.log(ele.text());
			// 	var $input = $('<input type="button" value="new button" />');
   //  			$input.appendTo($("body"));
			// })
			// elements.forEach(logFunction);
		});

	</script>
	<script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
	<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
	<script src="like_button.js"></script>
</body>
</html>
